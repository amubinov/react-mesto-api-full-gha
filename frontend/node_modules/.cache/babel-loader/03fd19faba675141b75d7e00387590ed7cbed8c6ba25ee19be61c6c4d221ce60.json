{"ast":null,"code":"import React from\"react\";import PopupWithForm from\"./PopupWithForm\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(props){var isOpen=props.isOpen,onClose=props.onClose,onChangeAvatar=props.onChangeAvatar,renderLoadingOn=props.renderLoadingOn,renderLoading=props.renderLoading;var currentUser=React.useContext(CurrentUserContext);var refAvatar=React.useRef(currentUser.avatar);React.useEffect(function(){refAvatar.current.value='';},[isOpen]);function handleSubmit(e){e.preventDefault();renderLoading();onChangeAvatar({avatar:refAvatar.current.value});}return/*#__PURE__*/_jsx(PopupWithForm,{name:\"avatar\",title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",submitcaption:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,renderLoadingOn:renderLoadingOn,renderLoadingCaption:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435...\",children:/*#__PURE__*/_jsxs(\"fieldset\",{className:\"form__fieldset\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"avatar-field\",className:\"form__field form__field_type_avatar\",ref:refAvatar,type:\"url\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",name:\"avatar\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"form__field-error avatar-field-error\"})]})});}export default EditAvatarPopup;","map":{"version":3,"names":["React","PopupWithForm","CurrentUserContext","jsx","_jsx","jsxs","_jsxs","EditAvatarPopup","props","isOpen","onClose","onChangeAvatar","renderLoadingOn","renderLoading","currentUser","useContext","refAvatar","useRef","avatar","useEffect","current","value","handleSubmit","e","preventDefault","name","title","submitcaption","onSubmit","renderLoadingCaption","children","className","id","ref","type","placeholder","required"],"sources":["C:/Users/User/react-mesto-api-full-gha/frontend/src/components/EditAvatarPopup.js"],"sourcesContent":["import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const { isOpen, onClose, onChangeAvatar, renderLoadingOn, renderLoading } = props;\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const refAvatar = React.useRef(currentUser.avatar);\r\n\r\n  React.useEffect(() => {\r\n    refAvatar.current.value = ''\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    renderLoading();\r\n    onChangeAvatar({\r\n      avatar: refAvatar.current.value\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatar\"\r\n      title=\"Обновить аватар\"\r\n      submitcaption=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      renderLoadingOn={renderLoadingOn}\r\n      renderLoadingCaption='Обновление...'\r\n      children={\r\n        <fieldset className=\"form__fieldset\">\r\n          <input id='avatar-field' className=\"form__field form__field_type_avatar\" ref={refAvatar} type=\"url\"\r\n            placeholder=\"Ссылка на аватар\" name=\"avatar\" required />\r\n          <span className=\"form__field-error avatar-field-error\"></span>\r\n        </fieldset>\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,OAASC,kBAAkB,KAAQ,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEpE,QAAS,CAAAC,eAAeA,CAACC,KAAK,CAAE,CAC9B,GAAQ,CAAAC,MAAM,CAA8DD,KAAK,CAAzEC,MAAM,CAAEC,OAAO,CAAqDF,KAAK,CAAjEE,OAAO,CAAEC,cAAc,CAAqCH,KAAK,CAAxDG,cAAc,CAAEC,eAAe,CAAoBJ,KAAK,CAAxCI,eAAe,CAAEC,aAAa,CAAKL,KAAK,CAAvBK,aAAa,CACvE,GAAM,CAAAC,WAAW,CAAGd,KAAK,CAACe,UAAU,CAACb,kBAAkB,CAAC,CACxD,GAAM,CAAAc,SAAS,CAAGhB,KAAK,CAACiB,MAAM,CAACH,WAAW,CAACI,MAAM,CAAC,CAElDlB,KAAK,CAACmB,SAAS,CAAC,UAAM,CACpBH,SAAS,CAACI,OAAO,CAACC,KAAK,CAAG,EAAE,CAC9B,CAAC,CAAE,CAACZ,MAAM,CAAC,CAAC,CAEZ,QAAS,CAAAa,YAAYA,CAACC,CAAC,CAAE,CACvBA,CAAC,CAACC,cAAc,EAAE,CAClBX,aAAa,EAAE,CACfF,cAAc,CAAC,CACbO,MAAM,CAAEF,SAAS,CAACI,OAAO,CAACC,KAC5B,CAAC,CAAC,CACJ,CAEA,mBACEjB,IAAA,CAACH,aAAa,EACZwB,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAC,uFAAiB,CACvBC,aAAa,CAAC,wDAAW,CACzBlB,MAAM,CAAEA,MAAO,CACfC,OAAO,CAAEA,OAAQ,CACjBkB,QAAQ,CAAEN,YAAa,CACvBV,eAAe,CAAEA,eAAgB,CACjCiB,oBAAoB,CAAC,iEAAe,CACpCC,QAAQ,cACNxB,KAAA,aAAUyB,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAClC1B,IAAA,UAAO4B,EAAE,CAAC,cAAc,CAACD,SAAS,CAAC,qCAAqC,CAACE,GAAG,CAAEjB,SAAU,CAACkB,IAAI,CAAC,KAAK,CACjGC,WAAW,CAAC,wFAAkB,CAACV,IAAI,CAAC,QAAQ,CAACW,QAAQ,OAAG,cAC1DhC,IAAA,SAAM2B,SAAS,CAAC,sCAAsC,EAAQ,GAEjE,EACD,CAEN,CAEA,cAAe,CAAAxB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}