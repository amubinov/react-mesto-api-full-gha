{"ast":null,"code":"import React,{useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PopupWithForm(_ref){var onClose=_ref.onClose,name=_ref.name,isOpen=_ref.isOpen,onSubmit=_ref.onSubmit,title=_ref.title,children=_ref.children,textButton=_ref.textButton,isValid=_ref.isValid;//Закрываем попапы по кнопке Escape \nuseEffect(function(){function onCloseEsc(evt){if(evt.key===\"Escape\"){onClose();}}if(isOpen){document.addEventListener(\"keydown\",onCloseEsc);}//  через `return` = `clean up`-функция. Она срабатывает при перерисовке или размонтировании\nreturn function(){document.removeEventListener(\"keydown\",onCloseEsc);};},[isOpen]);//  Закрываем попапы по  клику на Overlay\nuseEffect(function(){function onCloseOverlay(evt){if(evt.target.classList.contains('popup_opened')){onClose();}}if(isOpen){document.addEventListener('mousedown',onCloseOverlay);}return function(){document.removeEventListener(\"mousedown\",onCloseOverlay);};},[isOpen]);return/*#__PURE__*/_jsx(\"section\",{className:\"popup \".concat(name,\" \").concat(isOpen?'popup_opened':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup__container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"popup__close\",type:\"button\",\"aria-label\":\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",onClick:onClose}),/*#__PURE__*/_jsxs(\"form\",{className:\"popup__form popup__form_type_\".concat(name),name:\"\".concat(name,\"-form\"),onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"popup__title\",children:title}),children,/*#__PURE__*/_jsx(\"button\",{className:\"popup__submit-button \".concat(isValid?'':'popup__submit-button_disabled',\" \"),type:\"submit\",children:textButton})]})]})});}export default PopupWithForm;","map":{"version":3,"names":["React","useEffect","jsx","_jsx","jsxs","_jsxs","PopupWithForm","_ref","onClose","name","isOpen","onSubmit","title","children","textButton","isValid","onCloseEsc","evt","key","document","addEventListener","removeEventListener","onCloseOverlay","target","classList","contains","className","concat","type","onClick"],"sources":["C:/Users/User/react-mesto-api-full-gha/frontend/src/components/PopupWithForm.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\n\r\nfunction PopupWithForm({ onClose, name, isOpen, onSubmit,\r\n\ttitle,\r\n\tchildren,\r\n\ttextButton, isValid }) {\r\n\r\n\t//Закрываем попапы по кнопке Escape \r\n\r\n\tuseEffect(() => {\r\n\t\tfunction onCloseEsc(evt) {\r\n\t\t\tif (evt.key === \"Escape\") {\r\n\t\t\t\tonClose();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isOpen) {\r\n\t\t\tdocument.addEventListener(\"keydown\", onCloseEsc);\r\n\t\t}\r\n\r\n\t\t//  через `return` = `clean up`-функция. Она срабатывает при перерисовке или размонтировании\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"keydown\", onCloseEsc);\r\n\t\t};\r\n\t}, [isOpen]);\r\n\r\n\r\n\t//  Закрываем попапы по  клику на Overlay\r\n\tuseEffect(() => {\r\n\t\tfunction onCloseOverlay(evt) {\r\n\t\t\tif (evt.target.classList.contains('popup_opened')) {\r\n\t\t\t\tonClose();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isOpen) {\r\n\t\t\tdocument.addEventListener('mousedown', onCloseOverlay);\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", onCloseOverlay);\r\n\t\t};\r\n\t}, [isOpen]);\r\n\r\n\treturn (\r\n\t\t<section\r\n\t\t\tclassName={`popup ${name} ${isOpen ? 'popup_opened' : ''\r\n\t\t\t\t}`}\r\n\t\t>\r\n\t\t\t<div className=\"popup__container\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"popup__close\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\taria-label=\"Закрыть\"\r\n\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t/>\r\n\t\t\t\t<form\r\n\t\t\t\t\tclassName={`popup__form popup__form_type_${name}`}\r\n\t\t\t\t\tname={`${name}-form`}\r\n\t\t\t\t\tonSubmit={onSubmit}\r\n\t\t\t\t>\r\n\t\t\t\t\t<h2 className=\"popup__title\">{title}</h2>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={`popup__submit-button ${isValid ? '' : 'popup__submit-button_disabled'} `}\r\n\t\t\t\t\t\ttype=\"submit\">\r\n\t\t\t\t\t\t{textButton}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default PopupWithForm\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzC,QAAS,CAAAC,aAAaA,CAAAC,IAAA,CAGE,IAHC,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CAAEC,IAAI,CAAAF,IAAA,CAAJE,IAAI,CAAEC,MAAM,CAAAH,IAAA,CAANG,MAAM,CAAEC,QAAQ,CAAAJ,IAAA,CAARI,QAAQ,CACvDC,KAAK,CAAAL,IAAA,CAALK,KAAK,CACLC,QAAQ,CAAAN,IAAA,CAARM,QAAQ,CACRC,UAAU,CAAAP,IAAA,CAAVO,UAAU,CAAEC,OAAO,CAAAR,IAAA,CAAPQ,OAAO,CAEnB;AAEAd,SAAS,CAAC,UAAM,CACf,QAAS,CAAAe,UAAUA,CAACC,GAAG,CAAE,CACxB,GAAIA,GAAG,CAACC,GAAG,GAAK,QAAQ,CAAE,CACzBV,OAAO,EAAE,CACV,CACD,CACA,GAAIE,MAAM,CAAE,CACXS,QAAQ,CAACC,gBAAgB,CAAC,SAAS,CAAEJ,UAAU,CAAC,CACjD,CAEA;AACA,MAAO,WAAM,CACZG,QAAQ,CAACE,mBAAmB,CAAC,SAAS,CAAEL,UAAU,CAAC,CACpD,CAAC,CACF,CAAC,CAAE,CAACN,MAAM,CAAC,CAAC,CAGZ;AACAT,SAAS,CAAC,UAAM,CACf,QAAS,CAAAqB,cAAcA,CAACL,GAAG,CAAE,CAC5B,GAAIA,GAAG,CAACM,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,CAAE,CAClDjB,OAAO,EAAE,CACV,CACD,CACA,GAAIE,MAAM,CAAE,CACXS,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEE,cAAc,CAAC,CACvD,CAEA,MAAO,WAAM,CACZH,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEC,cAAc,CAAC,CAC1D,CAAC,CACF,CAAC,CAAE,CAACZ,MAAM,CAAC,CAAC,CAEZ,mBACCP,IAAA,YACCuB,SAAS,UAAAC,MAAA,CAAWlB,IAAI,MAAAkB,MAAA,CAAIjB,MAAM,CAAG,cAAc,CAAG,EAAE,CACpD,CAAAG,QAAA,cAEJR,KAAA,QAAKqB,SAAS,CAAC,kBAAkB,CAAAb,QAAA,eAChCV,IAAA,WACCuB,SAAS,CAAC,cAAc,CACxBE,IAAI,CAAC,QAAQ,CACb,aAAW,4CAAS,CACpBC,OAAO,CAAErB,OAAQ,EAChB,cACFH,KAAA,SACCqB,SAAS,iCAAAC,MAAA,CAAkClB,IAAI,CAAG,CAClDA,IAAI,IAAAkB,MAAA,CAAKlB,IAAI,SAAQ,CACrBE,QAAQ,CAAEA,QAAS,CAAAE,QAAA,eAEnBV,IAAA,OAAIuB,SAAS,CAAC,cAAc,CAAAb,QAAA,CAAED,KAAK,EAAM,CACxCC,QAAQ,cACTV,IAAA,WACCuB,SAAS,yBAAAC,MAAA,CAA0BZ,OAAO,CAAG,EAAE,CAAG,+BAA+B,KAAI,CACrFa,IAAI,CAAC,QAAQ,CAAAf,QAAA,CACZC,UAAU,EACH,GACH,GACF,EACG,CAEZ,CAEA,cAAe,CAAAR,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}