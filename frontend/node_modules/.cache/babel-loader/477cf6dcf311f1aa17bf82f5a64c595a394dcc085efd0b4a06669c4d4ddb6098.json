{"ast":null,"code":"import React,{useContext,useEffect}from'react';import PopupWithForm from'./PopupWithForm';import{CurrentUserContext}from'../contexts/CurrentUserContext';import{useFormValidation}from'../utils/useFormValidation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(_ref){var _values$userName,_values$userDescripti;var isOpen=_ref.isOpen,onChangeUser=_ref.onChangeUser,onClose=_ref.onClose;// Подписка на контекст\nvar currentUser=useContext(CurrentUserContext);var _useFormValidation=useFormValidation(),values=_useFormValidation.values,errors=_useFormValidation.errors,isValid=_useFormValidation.isValid,handleChange=_useFormValidation.handleChange,setValue=_useFormValidation.setValue,setIsValid=_useFormValidation.setIsValid;// После загрузки текущего пользователя из API его данные будут использованы в управляемых компонентах.\nuseEffect(function(){if(currentUser){setValue(\"userName\",currentUser.name);setValue(\"userDescription\",currentUser.about);}if(currentUser.name&&currentUser.about){setIsValid(true);}},[currentUser,setValue,isOpen]);function handleSubmit(e){// Запрещаем браузеру переходить по адресу формы\ne.preventDefault();// Передаём значения управляемых компонентов во внешний обработчик\nonChangeUser({name:values['userName'],about:values['userDescription']});}var errorClassName=function errorClassName(name){return\"popup__error \".concat(errors[name]?'popup__error_visible':'');};var onClosePopup=function onClosePopup(){onClose();// reset({ 'userName': currentUser.name, 'userDescription': currentUser.about }, true)\n};return/*#__PURE__*/_jsxs(PopupWithForm,{isOpen:isOpen,onClose:onClosePopup,onSubmit:handleSubmit,name:\"popup_profile\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\xA0\\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",textButton:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",isValid:isValid,children:[/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input_type_name\",id:\"inputName\",type:\"text\",name:\"userName\",placeholder:\"\\u0418\\u043C\\u044F\",value:(_values$userName=values['userName'])!==null&&_values$userName!==void 0?_values$userName:'',onChange:handleChange,required:true,minLength:\"2\",maxLength:\"40\"}),/*#__PURE__*/_jsx(\"span\",{className:errorClassName('userName'),id:\"inputName-error\",children:errors['userName']}),/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input_type_about\",name:\"userDescription\",id:\"inputAbout\",type:\"text\",placeholder:\"\\u041E \\u0441\\u0435\\u0431\\u0435\",value:(_values$userDescripti=values['userDescription'])!==null&&_values$userDescripti!==void 0?_values$userDescripti:'',onChange:handleChange,required:true,minLength:\"2\",maxLength:\"40\"}),/*#__PURE__*/_jsx(\"span\",{className:errorClassName('userDescription'),id:\"inputAbout-error\",children:errors['userDescription']})]});}export default EditProfilePopup;","map":{"version":3,"names":["React","useContext","useEffect","PopupWithForm","CurrentUserContext","useFormValidation","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","_ref","_values$userName","_values$userDescripti","isOpen","onChangeUser","onClose","currentUser","_useFormValidation","values","errors","isValid","handleChange","setValue","setIsValid","name","about","handleSubmit","e","preventDefault","errorClassName","concat","onClosePopup","onSubmit","title","textButton","children","className","id","type","placeholder","value","onChange","required","minLength","maxLength"],"sources":["C:/Users/User/react-mesto-api-full-gha/frontend/src/components/EditProfilePopup.js"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { useFormValidation } from '../utils/useFormValidation';\r\n\r\nfunction EditProfilePopup({ isOpen, onChangeUser, onClose }) {\r\n\r\n  // Подписка на контекст\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const { values, errors, isValid, handleChange, setValue, setIsValid } = useFormValidation();\r\n\r\n  // После загрузки текущего пользователя из API его данные будут использованы в управляемых компонентах.\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      setValue(\"userName\", currentUser.name);\r\n      setValue(\"userDescription\", currentUser.about);\r\n    }\r\n    if (currentUser.name && currentUser.about) {\r\n      setIsValid(true);\r\n    }\r\n  }, [currentUser, setValue, isOpen]);\r\n\r\n\r\n  function handleSubmit(e) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    onChangeUser({\r\n      name: values['userName'],\r\n      about: values['userDescription']\r\n    });\r\n  }\r\n\r\n  const errorClassName = (name) => `popup__error ${errors[name] ? 'popup__error_visible' : ''}`\r\n\r\n  const onClosePopup = () => {\r\n    onClose()\r\n    // reset({ 'userName': currentUser.name, 'userDescription': currentUser.about }, true)\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClosePopup}\r\n      onSubmit={handleSubmit}\r\n      name=\"popup_profile\"\r\n      title=\"Редактировать&nbsp;профиль\"\r\n      textButton=\"Сохранить\"\r\n      isValid={isValid}>\r\n\r\n      <input\r\n        className=\"popup__input popup__input_type_name\"\r\n        id=\"inputName\"\r\n        type=\"text\"\r\n        name='userName'\r\n        placeholder=\"Имя\"\r\n        value={values['userName'] ?? ''}\r\n        onChange={handleChange}\r\n        required\r\n        minLength='2'\r\n        maxLength='40'\r\n      />\r\n      <span className={errorClassName('userName')} id=\"inputName-error\">{errors['userName']}</span>\r\n      <input\r\n        className=\"popup__input popup__input_type_about\"\r\n        name='userDescription'\r\n        id=\"inputAbout\"\r\n        type=\"text\"\r\n        placeholder=\"О себе\"\r\n        value={values['userDescription'] ?? ''}\r\n        onChange={handleChange}\r\n        required\r\n        minLength='2'\r\n        maxLength='40'\r\n      />\r\n      <span className={errorClassName('userDescription')} id=\"inputAbout-error\">{errors['userDescription']}</span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}