{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\react-mesto-api-full-gha\\\\frontend\\\\src\\\\components\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport '../index.css';\nimport Footer from './Footer';\nimport Header from './Header';\nimport Main from './Main';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport { CurrentUserContext, currentUserInfo } from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ConfirmDeletePopup from './ConfirmDeletePopup';\nimport { Routes, Route, useNavigate, Navigate } from 'react-router-dom';\nimport ProtectedRoute from './ProtectedRoute';\nimport * as auth from '../utils/auth';\nimport InfoToolTip from './InfoTooltip';\nimport Login from './Login';\nimport Register from './Register';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen] = useState(false);\n  const [isInfoToolTipPopupOpen, setInfoToolTipPopupOpen] = useState(false);\n  const [renderLoadingOn, setIsRenderLoadingOn] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [cards, setCards] = useState([]);\n  const [currentUser, setCurrentUser] = useState(currentUserInfo);\n  const [email, setEmail] = useState(null);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const userId = localStorage.getItem('userId');\n    if (userId) {\n      auth.checkToken(userId).then(res => {\n        if (res) {\n          setIsLoggedIn(true);\n          setEmail(res.email);\n          navigate('/', {\n            replace: true\n          });\n        }\n      }).catch(err => {\n        if (err.status === 400) {\n          console.log('400 — Токен не передан или передан не в том формате');\n        } else if (err.status === 401) {\n          console.log('401 — Переданный токен некорректен');\n        }\n      });\n    }\n  }, []);\n\n  // [navigate]);\n\n  // Регистрация пользователя\n  const handleRegisterSubmit = (email, password) => {\n    auth.register(email, password).then(res => {\n      // if (res) {\n      //         setPopupStatus({\n      //           image: UnionBlack,\n      //           message: 'Вы успешно зарегистрировались!'\n      //         });\n      //         navigate(\"/sign-in\");\n      //         setIsLoggedIn(true);\n      //         setEmail(res.email);\n      //       }\n      //     })\n      //     .catch(() => {\n      //       setPopupStatus({\n      //         image: UnionRed,\n      //         message: 'Что-то пошло не так! Попробуйте еще раз.'\n      //       });\n      //     })\n      //     .finally(handleInfoTooltip);\n      // };\n      setInfoToolTipPopupOpen(true);\n      setIsSuccess(true);\n      navigate('/sign-in');\n    }).catch(err => {\n      if (err.status === 400) {\n        console.log('400 - некорректно заполнено одно из полей');\n      }\n      setInfoToolTipPopupOpen(true);\n      setIsSuccess(false);\n    });\n  };\n\n  // Вход в аккаунт\n  const handleLoginSubmit = (email, password) => {\n    auth.login(email, password).then(res => {\n      localStorage.setItem('userId', res._id);\n      setIsLoggedIn(true);\n      setEmail(email);\n      navigate(\"/\");\n    }).catch(err => {\n      // setPopupStatus({ image: UnionRed, message: 'Что-то пошло не так! Попробуйте еще раз.' });\n      // handleInfoTooltip();\n      //     });\n      // };\n      if (err.status === 400) {\n        console.log('400 - не передано одно из полей');\n      } else if (err.status === 401) {\n        console.log('401 - пользователь с email не найден');\n      }\n      setInfoToolTipPopupOpen(true);\n      setIsSuccess(false);\n    });\n  };\n  const handleSignOut = () => {\n    localStorage.removeItem('userId');\n    setIsLoggedIn(false);\n    setEmail(null);\n    setCards([]);\n    navigate('/', {\n      replace: true\n    });\n  };\n\n  // // Получение данных текущего пользователя и начальных карточек\n  // useEffect(() => {\n  //   if (isLoggedIn) {\n  //     api.getMyInfo()\n  //       .then((data) => {\n  //         setCurrentUser(data)\n  //       })\n  //       .catch((err) => { console.log(err) })\n  //   }\n  // }, [isLoggedIn]);\n\n  // useEffect(() => {\n  //   if (isLoggedIn) {\n  //     api.getServerCards()\n  //       .then((cards) => {\n  //         setCards(cards);\n  //       })\n  //       .catch((err) => { console.log(err) })\n  //   }\n  // }, [isLoggedIn])\n\n  // Получение данных текущего пользователя и начальных карточек\n  useEffect(() => {\n    const userId = localStorage.getItem('userId');\n    if (userId) {\n      // if (isLoggedIn) {\n      Promise.all([api.getMyInfo(), api.getServerCards()]).then(_ref => {\n        let [data, cards] = _ref;\n        setCurrentUser(data);\n        setCards(cards);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  },\n  //  [navigate]);\n  [isLoggedIn]);\n\n  // function handleInfoTooltip() {\n  //   setInfoToolTipPopupOpen(true);\n  // };\n\n  function renderLoading() {\n    setIsRenderLoadingOn(renderLoadingOn => !renderLoadingOn);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);\n  }\n  function handleConfirmDeleteClick(card) {\n    setSelectedCard(card);\n    setIsConfirmDeletePopupOpen(true);\n  }\n\n  // function handleCardLike(card) {\n  //   // Снова проверяем, есть ли уже лайк на этой карточке\n  //   const isLiked = card.likes.some((like) => like._id === currentUser._id);\n  //   // Отправляем запрос в API и получаем обновлённые данные карточки\n  //   if (!isLiked) {\n  //     api.addLike(card._id, isLiked).then((newCard) => {\n  //       setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n  //     }).catch((err) => {\n  //       console.error(err);\n  //     });\n  //   } else {\n  //     api.deleteLike(card._id).then((newCard) => {\n  //       setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n  //     }).catch((err) => {\n  //       console.error(err);\n  //     });\n  //   }\n  // }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked).then(newCard => {\n      setCards(state => state.map(c => c._id === card._id ? newCard : c));\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  // function handleCardDelete(card) {\n  //   api.deleteCard(card._id).then(() => {\n  //     setCards((state) => state.filter((c) => c._id !== card._id && c));\n  //     closeAllPopups()\n  //   }).catch((err) => {\n  //     console.error(err);\n  //   });\n  // }\n\n  function handleCardDelete() {\n    api.deleteCard(selectedCard._id).then(() => {\n      setCards(cards => cards.filter(item => item._id !== selectedCard._id));\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => renderLoading());\n  }\n  function handleAddCard(card) {\n    api.addNewCard(card).then(newCard => {\n      setCards([newCard, ...cards]);\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => renderLoading());\n  }\n  function handleChangeProfile(userData) {\n    api.changeProfileData(userData).then(serverUserData => {\n      setCurrentUser(serverUserData);\n      closeAllPopups();\n    }).catch(err => console.log(err)).finally(() => renderLoading());\n  }\n  function handleChangeAvatar(userAvatar) {\n    api.changeUserAvatar(userAvatar).then(serverUserAvatar => {\n      setCurrentUser(serverUserAvatar);\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => renderLoading());\n  }\n\n  // function handleAddPlaceSubmit(items) {\n  //   api\n  //     .addCard(items)\n  //     .then((newCard) => {\n  //       setCards([newCard, ...cards]);\n  //       closeAllPopups();\n  //     })\n  //     .catch((err) => console.log(err));\n  // }\n\n  function closePopupEscape(event) {\n    if (event.key === 'Escape') {\n      closeAllPopups();\n    }\n  }\n  function closePopupOverlay(event) {\n    if (event.target.classList.contains('popup_opened')) {\n      closeAllPopups();\n    }\n  }\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(null);\n    setIsConfirmDeletePopupOpen(false);\n    setInfoToolTipPopupOpen(false);\n  }\n\n  //   return (\n  //     <CurrentUserContext.Provider value={currentUser}>\n  //       <div className=\"page\">\n  //         <Header\n  //           email={email}\n  //           onSignOut={handleSignOut}\n  //           isLoggedIn={isLoggedIn}\n  //         />\n  //         <Routes>\n  //           <Route path='/'\n  //             element={<ProtectedRoute\n  //               onEditAvatar={handleEditAvatarClick}\n  //               onEditProfile={handleEditProfileClick}\n  //               onAddPlace={handleAddPlaceClick}\n  //               onCardClick={handleCardClick}\n  //               onCardLike={handleCardLike}\n  //               onCardDelete={handleConfirmDeleteClick}\n  //               cards={cards}\n  //               loggedIn={isLoggedIn}\n  //               element={Main}\n  //             />}\n  //           />\n  //           <Route path=\"/sign-in\"\n  //             element={<Login onLogin={handleLoginSubmit} />} />\n  //           <Route path=\"/sign-up\"\n  //             element={<Register onRegister={handleRegisterSubmit} />} />\n  //         </Routes>\n  //         {isLoggedIn && <Footer />}\n  //         <EditProfilePopup\n  //           isOpen={isEditProfilePopupOpen}\n  //           onClose={closeAllPopups}\n  //           onUpdateProfile={handleChangeProfile}\n  //           renderLoadingOn={renderLoadingOn}\n  //           renderLoading={renderLoading}\n  //         />\n  //         <AddPlacePopup\n  //           isOpen={isAddPlacePopupOpen}\n  //           onClose={closeAllPopups}\n  //           onAddPlace={handleAddCard}\n  //           renderLoadingOn={renderLoadingOn}\n  //           renderLoading={renderLoading}\n  //         />\n  //         <ImagePopup\n  //           card={selectedCard}\n  //           isOpen={isImagePopupOpen}\n  //           onClose={closeAllPopups}\n  //         />\n  //         <ConfirmDeletePopup\n  //           isOpen={isConfirmDeletePopupOpen}\n  //           onClose={closeAllPopups}\n  //           onDeleteCard={handleCardDelete}\n  //           renderLoadingOn={renderLoadingOn}\n  //           renderLoading={renderLoading}\n  //         />\n  //         <EditAvatarPopup\n  //           isOpen={isEditAvatarPopupOpen}\n  //           onClose={closeAllPopups}\n  //           onChangeAvatar={handleChangeAvatar}\n  //           renderLoadingOn={renderLoadingOn}\n  //           renderLoading={renderLoading}\n  //         />\n  //         <InfoToolTip\n  //           isOpen={isInfoToolTipPopupOpen}\n  //           onClose={closeAllPopups}\n  //           isSuccess={isSuccess}\n  //         />\n  //       </div>\n  //     </CurrentUserContext.Provider>\n  //   );\n  // }\n\n  // export default App;\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page\",\n      children: [/*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/sign-up\",\n          element: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              title: \"\\u0412\\u043E\\u0439\\u0442\\u0438\",\n              route: \"/sign-in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Register, {\n              onRegister: handleRegisterSubmit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/sign-in\",\n          element: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              title: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\",\n              route: \"/sign-up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Login, {\n              onLogin: handleLoginSubmit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              title: \"\\u0412\\u044B\\u0439\\u0442\\u0438\",\n              route: \"\",\n              email: email,\n              onClick: handleSignOut\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n              path: \"/\",\n              component: Main,\n              LoggedIn: isLoggedIn,\n              onEditAvatar: handleEditAvatarClick,\n              onEditProfile: handleEditProfileClick,\n              onAddPlace: handleAddPlaceClick,\n              onCardClick: handleCardClick,\n              onCardLike: handleCardLike,\n              onCardDelete: handleConfirmDeleteClick,\n              cards: cards\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          element: isLoggedIn ? /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 28\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/sign-in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n        isOpen: isEditProfilePopupOpen,\n        onClose: closeAllPopups,\n        onCloseEscape: closePopupEscape,\n        onCloseOverlay: closePopupOverlay,\n        onUpdateUser: handleUpdateUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n        isOpen: isEditAvatarPopupOpen,\n        onClose: closeAllPopups,\n        onCloseEscape: closePopupEscape,\n        onCloseOverlay: closePopupOverlay,\n        onUpdateAvatar: handleUpdateAvatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n        isOpen: isAddPlacePopupOpen,\n        onClose: closeAllPopups,\n        onCloseEscape: closePopupEscape,\n        onCloseOverlay: closePopupOverlay,\n        onAddPlace: handleAddPlaceSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ConfirmationPopup, {\n        card: isConfirmationPopupOpen,\n        name: \"popup_card-delete\",\n        title: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",\n        textButton: \"\\u0414\\u0430\",\n        onClose: closeAllPopups,\n        onCardDelete: handleCardDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n        card: selectedCard,\n        onClose: closeAllPopups,\n        onCloseEscape: closePopupEscape,\n        onCloseOverlay: closePopupOverlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InfoTooltip, {\n        popupStatus: popupStatus,\n        isOpen: isInfoTooltipPopupOpen,\n        onClose: closeAllPopups,\n        onCloseEscape: closePopupEscape,\n        onCloseOverlay: closePopupOverlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 404,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"5iVHyInTUxEOyGRDUSmBP2eSu0A=\", false, function () {\n  return [useNavigate];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Footer","Header","Main","ImagePopup","api","CurrentUserContext","currentUserInfo","EditProfilePopup","EditAvatarPopup","AddPlacePopup","ConfirmDeletePopup","Routes","Route","useNavigate","Navigate","ProtectedRoute","auth","InfoToolTip","Login","Register","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isConfirmDeletePopupOpen","setIsConfirmDeletePopupOpen","isInfoToolTipPopupOpen","setInfoToolTipPopupOpen","renderLoadingOn","setIsRenderLoadingOn","selectedCard","setSelectedCard","cards","setCards","currentUser","setCurrentUser","email","setEmail","isLoggedIn","setIsLoggedIn","isSuccess","setIsSuccess","navigate","userId","localStorage","getItem","checkToken","then","res","replace","catch","err","status","console","log","handleRegisterSubmit","password","register","handleLoginSubmit","login","setItem","_id","handleSignOut","removeItem","Promise","all","getMyInfo","getServerCards","_ref","data","renderLoading","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleCardClick","card","handleConfirmDeleteClick","handleCardLike","isLiked","likes","some","i","changeLikeCardStatus","newCard","state","map","c","handleCardDelete","deleteCard","filter","item","closeAllPopups","finally","handleAddCard","addNewCard","handleChangeProfile","userData","changeProfileData","serverUserData","handleChangeAvatar","userAvatar","changeUserAvatar","serverUserAvatar","closePopupEscape","event","key","closePopupOverlay","target","classList","contains","Provider","value","children","className","path","element","title","route","fileName","_jsxFileName","lineNumber","columnNumber","onRegister","onLogin","onClick","component","LoggedIn","onEditAvatar","onEditProfile","onAddPlace","onCardClick","onCardLike","onCardDelete","to","isOpen","onClose","onCloseEscape","onCloseOverlay","onUpdateUser","handleUpdateUser","onUpdateAvatar","handleUpdateAvatar","handleAddPlaceSubmit","ConfirmationPopup","isConfirmationPopupOpen","name","textButton","InfoTooltip","popupStatus","isInfoTooltipPopupOpen","_c","$RefreshReg$"],"sources":["C:/Users/User/react-mesto-api-full-gha/frontend/src/components/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../index.css';\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport ImagePopup from './ImagePopup';\r\nimport api from '../utils/api';\r\nimport { CurrentUserContext, currentUserInfo } from '../contexts/CurrentUserContext';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ConfirmDeletePopup from './ConfirmDeletePopup';\r\nimport { Routes, Route, useNavigate, Navigate } from 'react-router-dom';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport * as auth from '../utils/auth';\r\nimport InfoToolTip from './InfoTooltip';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\n\r\nfunction App() {\r\n\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\r\n\r\n  const [isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen] = useState(false);\r\n  const [isInfoToolTipPopupOpen, setInfoToolTipPopupOpen] = useState(false);\r\n\r\n  const [renderLoadingOn, setIsRenderLoadingOn] = useState(false);\r\n\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [cards, setCards] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState(currentUserInfo);\r\n\r\n  const [email, setEmail] = useState(null);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  const [isSuccess, setIsSuccess] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem('userId');\r\n    if (userId) {\r\n      auth.checkToken(userId)\r\n        .then((res) => {\r\n          if (res) {\r\n            setIsLoggedIn(true);\r\n            setEmail(res.email);\r\n            navigate('/', { replace: true });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          if (err.status === 400) {\r\n            console.log('400 — Токен не передан или передан не в том формате');\r\n          } else if (err.status === 401) {\r\n            console.log('401 — Переданный токен некорректен');\r\n          }\r\n        });\r\n    }\r\n  },\r\n    []);\r\n\r\n  // [navigate]);\r\n\r\n  // Регистрация пользователя\r\n  const handleRegisterSubmit = (email, password) => {\r\n    auth.register(email, password)\r\n      .then((res) => {\r\n        // if (res) {\r\n        //         setPopupStatus({\r\n        //           image: UnionBlack,\r\n        //           message: 'Вы успешно зарегистрировались!'\r\n        //         });\r\n        //         navigate(\"/sign-in\");\r\n        //         setIsLoggedIn(true);\r\n        //         setEmail(res.email);\r\n        //       }\r\n        //     })\r\n        //     .catch(() => {\r\n        //       setPopupStatus({\r\n        //         image: UnionRed,\r\n        //         message: 'Что-то пошло не так! Попробуйте еще раз.'\r\n        //       });\r\n        //     })\r\n        //     .finally(handleInfoTooltip);\r\n        // };\r\n        setInfoToolTipPopupOpen(true);\r\n        setIsSuccess(true);\r\n        navigate('/sign-in');\r\n      })\r\n      .catch(err => {\r\n        if (err.status === 400) {\r\n          console.log('400 - некорректно заполнено одно из полей');\r\n        }\r\n        setInfoToolTipPopupOpen(true);\r\n        setIsSuccess(false);\r\n      });\r\n  }\r\n\r\n\r\n\r\n  // Вход в аккаунт\r\n  const handleLoginSubmit = (email, password) => {\r\n    auth.login(email, password)\r\n      .then((res) => {\r\n        localStorage.setItem('userId', res._id);\r\n        setIsLoggedIn(true);\r\n        setEmail(email);\r\n        navigate(\"/\")\r\n\r\n      })\r\n      .catch((err) => {\r\n        // setPopupStatus({ image: UnionRed, message: 'Что-то пошло не так! Попробуйте еще раз.' });\r\n        // handleInfoTooltip();\r\n        //     });\r\n        // };\r\n        if (err.status === 400) {\r\n          console.log('400 - не передано одно из полей');\r\n        } else if (err.status === 401) {\r\n          console.log('401 - пользователь с email не найден');\r\n        }\r\n        setInfoToolTipPopupOpen(true);\r\n        setIsSuccess(false);\r\n      });\r\n  }\r\n\r\n  const handleSignOut = () => {\r\n    localStorage.removeItem('userId');\r\n    setIsLoggedIn(false);\r\n    setEmail(null);\r\n    setCards([]);\r\n    navigate('/', { replace: true });\r\n  };\r\n\r\n  // // Получение данных текущего пользователя и начальных карточек\r\n  // useEffect(() => {\r\n  //   if (isLoggedIn) {\r\n  //     api.getMyInfo()\r\n  //       .then((data) => {\r\n  //         setCurrentUser(data)\r\n  //       })\r\n  //       .catch((err) => { console.log(err) })\r\n  //   }\r\n  // }, [isLoggedIn]);\r\n\r\n  // useEffect(() => {\r\n  //   if (isLoggedIn) {\r\n  //     api.getServerCards()\r\n  //       .then((cards) => {\r\n  //         setCards(cards);\r\n  //       })\r\n  //       .catch((err) => { console.log(err) })\r\n  //   }\r\n  // }, [isLoggedIn])\r\n\r\n\r\n  // Получение данных текущего пользователя и начальных карточек\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem('userId');\r\n    if (userId) {\r\n      // if (isLoggedIn) {\r\n      Promise.all([api.getMyInfo(), api.getServerCards()]).then(([data, cards]) => {\r\n        setCurrentUser(data);\r\n        setCards(cards);\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      })\r\n    }\r\n  },\r\n    //  [navigate]);\r\n    [isLoggedIn])\r\n\r\n\r\n  // function handleInfoTooltip() {\r\n  //   setInfoToolTipPopupOpen(true);\r\n  // };\r\n\r\n  function renderLoading() {\r\n    setIsRenderLoadingOn((renderLoadingOn) => !renderLoadingOn);\r\n  }\r\n\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n    setIsImagePopupOpen(true)\r\n  }\r\n\r\n  function handleConfirmDeleteClick(card) {\r\n    setSelectedCard(card);\r\n    setIsConfirmDeletePopupOpen(true)\r\n  }\r\n\r\n\r\n\r\n  // function handleCardLike(card) {\r\n  //   // Снова проверяем, есть ли уже лайк на этой карточке\r\n  //   const isLiked = card.likes.some((like) => like._id === currentUser._id);\r\n  //   // Отправляем запрос в API и получаем обновлённые данные карточки\r\n  //   if (!isLiked) {\r\n  //     api.addLike(card._id, isLiked).then((newCard) => {\r\n  //       setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\r\n  //     }).catch((err) => {\r\n  //       console.error(err);\r\n  //     });\r\n  //   } else {\r\n  //     api.deleteLike(card._id).then((newCard) => {\r\n  //       setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\r\n  //     }).catch((err) => {\r\n  //       console.error(err);\r\n  //     });\r\n  //   }\r\n  // }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    api.changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n      })\r\n      .catch((err) => { console.log(err) })\r\n  }\r\n\r\n\r\n\r\n  // function handleCardDelete(card) {\r\n  //   api.deleteCard(card._id).then(() => {\r\n  //     setCards((state) => state.filter((c) => c._id !== card._id && c));\r\n  //     closeAllPopups()\r\n  //   }).catch((err) => {\r\n  //     console.error(err);\r\n  //   });\r\n  // }\r\n\r\n  function handleCardDelete() {\r\n    api.deleteCard(selectedCard._id)\r\n      .then(() => {\r\n        setCards((cards) => cards.filter((item) => item._id !== selectedCard._id))\r\n        closeAllPopups()\r\n      })\r\n      .catch((err) => { console.log(err) })\r\n      .finally(() => renderLoading())\r\n  }\r\n\r\n  function handleAddCard(card) {\r\n    api.addNewCard(card)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => { console.log(err) })\r\n      .finally(() => renderLoading())\r\n  }\r\n\r\n\r\n\r\n  function handleChangeProfile(userData) {\r\n    api\r\n      .changeProfileData(userData)\r\n      .then((serverUserData) => {\r\n        setCurrentUser(serverUserData);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => renderLoading())\r\n  }\r\n\r\n  function handleChangeAvatar(userAvatar) {\r\n    api.changeUserAvatar(userAvatar).then((serverUserAvatar) => {\r\n      setCurrentUser(serverUserAvatar);\r\n      closeAllPopups();\r\n    }).catch((err) => { console.log(err) })\r\n      .finally(() => renderLoading())\r\n  }\r\n\r\n\r\n  // function handleAddPlaceSubmit(items) {\r\n  //   api\r\n  //     .addCard(items)\r\n  //     .then((newCard) => {\r\n  //       setCards([newCard, ...cards]);\r\n  //       closeAllPopups();\r\n  //     })\r\n  //     .catch((err) => console.log(err));\r\n  // }\r\n\r\n\r\n\r\n  function closePopupEscape(event) {\r\n    if (event.key === 'Escape') {\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n  function closePopupOverlay(event) {\r\n    if (event.target.classList.contains('popup_opened')) {\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard(null);\r\n    setIsConfirmDeletePopupOpen(false);\r\n    setInfoToolTipPopupOpen(false);\r\n  }\r\n\r\n\r\n\r\n\r\n  //   return (\r\n  //     <CurrentUserContext.Provider value={currentUser}>\r\n  //       <div className=\"page\">\r\n  //         <Header\r\n  //           email={email}\r\n  //           onSignOut={handleSignOut}\r\n  //           isLoggedIn={isLoggedIn}\r\n  //         />\r\n  //         <Routes>\r\n  //           <Route path='/'\r\n  //             element={<ProtectedRoute\r\n  //               onEditAvatar={handleEditAvatarClick}\r\n  //               onEditProfile={handleEditProfileClick}\r\n  //               onAddPlace={handleAddPlaceClick}\r\n  //               onCardClick={handleCardClick}\r\n  //               onCardLike={handleCardLike}\r\n  //               onCardDelete={handleConfirmDeleteClick}\r\n  //               cards={cards}\r\n  //               loggedIn={isLoggedIn}\r\n  //               element={Main}\r\n  //             />}\r\n  //           />\r\n  //           <Route path=\"/sign-in\"\r\n  //             element={<Login onLogin={handleLoginSubmit} />} />\r\n  //           <Route path=\"/sign-up\"\r\n  //             element={<Register onRegister={handleRegisterSubmit} />} />\r\n  //         </Routes>\r\n  //         {isLoggedIn && <Footer />}\r\n  //         <EditProfilePopup\r\n  //           isOpen={isEditProfilePopupOpen}\r\n  //           onClose={closeAllPopups}\r\n  //           onUpdateProfile={handleChangeProfile}\r\n  //           renderLoadingOn={renderLoadingOn}\r\n  //           renderLoading={renderLoading}\r\n  //         />\r\n  //         <AddPlacePopup\r\n  //           isOpen={isAddPlacePopupOpen}\r\n  //           onClose={closeAllPopups}\r\n  //           onAddPlace={handleAddCard}\r\n  //           renderLoadingOn={renderLoadingOn}\r\n  //           renderLoading={renderLoading}\r\n  //         />\r\n  //         <ImagePopup\r\n  //           card={selectedCard}\r\n  //           isOpen={isImagePopupOpen}\r\n  //           onClose={closeAllPopups}\r\n  //         />\r\n  //         <ConfirmDeletePopup\r\n  //           isOpen={isConfirmDeletePopupOpen}\r\n  //           onClose={closeAllPopups}\r\n  //           onDeleteCard={handleCardDelete}\r\n  //           renderLoadingOn={renderLoadingOn}\r\n  //           renderLoading={renderLoading}\r\n  //         />\r\n  //         <EditAvatarPopup\r\n  //           isOpen={isEditAvatarPopupOpen}\r\n  //           onClose={closeAllPopups}\r\n  //           onChangeAvatar={handleChangeAvatar}\r\n  //           renderLoadingOn={renderLoadingOn}\r\n  //           renderLoading={renderLoading}\r\n  //         />\r\n  //         <InfoToolTip\r\n  //           isOpen={isInfoToolTipPopupOpen}\r\n  //           onClose={closeAllPopups}\r\n  //           isSuccess={isSuccess}\r\n  //         />\r\n  //       </div>\r\n  //     </CurrentUserContext.Provider>\r\n  //   );\r\n  // }\r\n\r\n  // export default App;\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Routes>\r\n          <Route path='/sign-up'\r\n            element={\r\n              <>\r\n                <Header\r\n                  title='Войти'\r\n                  route='/sign-in'\r\n                />\r\n                <Register\r\n                  onRegister={handleRegisterSubmit}\r\n                />\r\n              </>\r\n            }\r\n          />\r\n          <Route path='/sign-in'\r\n            element={\r\n              <>\r\n                <Header\r\n                  title='Регистрация'\r\n                  route='/sign-up'\r\n                />\r\n                <Login\r\n                  onLogin={handleLoginSubmit}\r\n                />\r\n              </>\r\n            }\r\n          />\r\n          <Route path='/'\r\n            element={\r\n              <>\r\n                <Header\r\n                  title='Выйти'\r\n                  route=''\r\n                  email={email}\r\n                  onClick={handleSignOut}\r\n                />\r\n                <ProtectedRoute\r\n                  path=\"/\"\r\n                  component={Main}\r\n                  LoggedIn={isLoggedIn}\r\n                  onEditAvatar={handleEditAvatarClick}\r\n                  onEditProfile={handleEditProfileClick}\r\n                  onAddPlace={handleAddPlaceClick}\r\n                  onCardClick={handleCardClick}\r\n                  onCardLike={handleCardLike}\r\n                  onCardDelete={handleConfirmDeleteClick}\r\n                  cards={cards}\r\n                />\r\n                <Footer />\r\n              </>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"*\"\r\n            element={\r\n              isLoggedIn ? <Navigate to=\"/\" /> : <Navigate to=\"/sign-in\" />\r\n            }\r\n          />\r\n        </Routes>\r\n\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onCloseEscape={closePopupEscape}\r\n          onCloseOverlay={closePopupOverlay}\r\n          onUpdateUser={handleUpdateUser}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onCloseEscape={closePopupEscape}\r\n          onCloseOverlay={closePopupOverlay}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onCloseEscape={closePopupEscape}\r\n          onCloseOverlay={closePopupOverlay}\r\n          onAddPlace={handleAddPlaceSubmit}\r\n        />\r\n        <ConfirmationPopup\r\n          card={isConfirmationPopupOpen}\r\n          name=\"popup_card-delete\"\r\n          title=\"Вы уверены?\"\r\n          textButton=\"Да\"\r\n          onClose={closeAllPopups}\r\n          onCardDelete={handleCardDelete}\r\n        />\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          onClose={closeAllPopups}\r\n          onCloseEscape={closePopupEscape}\r\n          onCloseOverlay={closePopupOverlay}\r\n        />\r\n        <InfoTooltip\r\n          popupStatus={popupStatus}\r\n          isOpen={isInfoTooltipPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onCloseEscape={closePopupEscape}\r\n          onCloseOverlay={closePopupOverlay}\r\n        />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}