[{"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\index.js":"1","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\reportWebVitals.js":"2","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\App.jsx":"3","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Main.js":"4","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\ImagePopup.js":"5","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\EditAvatarPopup.js":"6","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Footer.js":"7","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Header.js":"8","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\EditProfilePopup.js":"9","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\AddPlacePopup.js":"10","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\InfoTooltip.js":"11","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\ProtectedRoute.js":"12","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Login.js":"13","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Register.js":"14","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\utils\\api.js":"15","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\utils\\auth.js":"16","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\contexts\\CurrentUserContext.js":"17","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Card.js":"18","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\PopupWithForm.js":"19","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\ConfirmDeletePopup.js":"20"},{"size":757,"mtime":1688724243141,"results":"21","hashOfConfig":"22"},{"size":375,"mtime":1688724243142,"results":"23","hashOfConfig":"22"},{"size":8823,"mtime":1688919416836,"results":"24","hashOfConfig":"22"},{"size":1714,"mtime":1688915573122,"results":"25","hashOfConfig":"22"},{"size":603,"mtime":1688835929937,"results":"26","hashOfConfig":"22"},{"size":1346,"mtime":1688836075853,"results":"27","hashOfConfig":"22"},{"size":246,"mtime":1688836032130,"results":"28","hashOfConfig":"22"},{"size":1417,"mtime":1688836015577,"results":"29","hashOfConfig":"22"},{"size":1933,"mtime":1688836054848,"results":"30","hashOfConfig":"22"},{"size":1659,"mtime":1688838503012,"results":"31","hashOfConfig":"22"},{"size":1150,"mtime":1688835324580,"results":"32","hashOfConfig":"22"},{"size":264,"mtime":1688724243115,"results":"33","hashOfConfig":"22"},{"size":1211,"mtime":1688920029979,"results":"34","hashOfConfig":"22"},{"size":1576,"mtime":1688920285122,"results":"35","hashOfConfig":"22"},{"size":3569,"mtime":1688916468293,"results":"36","hashOfConfig":"22"},{"size":1277,"mtime":1688926525400,"results":"37","hashOfConfig":"22"},{"size":287,"mtime":1688918173672,"results":"38","hashOfConfig":"22"},{"size":1493,"mtime":1688838473547,"results":"39","hashOfConfig":"22"},{"size":804,"mtime":1688835872238,"results":"40","hashOfConfig":"22"},{"size":646,"mtime":1688839914688,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","suppressedMessages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1daed1",{"filePath":"45","messages":"46","suppressedMessages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","suppressedMessages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51"},{"filePath":"52","messages":"53","suppressedMessages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","suppressedMessages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","suppressedMessages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","suppressedMessages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","suppressedMessages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","suppressedMessages":"69","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","suppressedMessages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","suppressedMessages":"75","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","suppressedMessages":"78","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","suppressedMessages":"81","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","suppressedMessages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"85","messages":"86","suppressedMessages":"87","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","suppressedMessages":"90","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"91","messages":"92","suppressedMessages":"93","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","suppressedMessages":"96","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"97","messages":"98","suppressedMessages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"100","messages":"101","suppressedMessages":"102","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\index.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\reportWebVitals.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\App.jsx",["103"],[],"import React, { useState, useEffect } from 'react';\r\nimport '../index.css';\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport ImagePopup from './ImagePopup';\r\nimport api from '../utils/api';\r\nimport { CurrentUserContext, currentUserInfo } from '../contexts/CurrentUserContext';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ConfirmDeletePopup from './ConfirmDeletePopup';\r\nimport { Routes, Route, useNavigate } from 'react-router-dom';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport * as auth from '../utils/auth';\r\nimport InfoToolTip from './InfoTooltip';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\n\r\nfunction App() {\r\n\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\r\n\r\n  const [isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen] = useState(false);\r\n  const [isInfoToolTipPopupOpen, setInfoToolTipPopupOpen] = useState(false);\r\n\r\n  const [renderLoadingOn, setIsRenderLoadingOn] = useState(false);\r\n\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [cards, setCards] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState(currentUserInfo);\r\n\r\n  const [email, setEmail] = useState(null);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  const [isSuccess, setIsSuccess] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n\r\n\r\n  // Регистрация пользователя\r\n  const handleRegisterSubmit = (email, password) => {\r\n    auth.register(email, password)\r\n      .then((res) => {\r\n        setInfoToolTipPopupOpen(true);\r\n        setIsSuccess(true);\r\n        navigate('/sign-in');\r\n      })\r\n      .catch(err => {\r\n        if (err.status === 400) {\r\n          console.log('400 - некорректно заполнено одно из полей');\r\n        }\r\n        setInfoToolTipPopupOpen(true);\r\n        setIsSuccess(false);\r\n      });\r\n  }\r\n\r\n  // Вход в аккаунт\r\n  const handleLoginSubmit = (email, password) => {\r\n    auth.login(email, password)\r\n      .then((res) => {\r\n        localStorage.setItem('userId', res._id);\r\n        setIsLoggedIn(true);\r\n        setEmail(email);\r\n        navigate(\"/\")\r\n\r\n      })\r\n      .catch((err) => {\r\n        if (err.status === 400) {\r\n          console.log('400 - не передано одно из полей');\r\n        } else if (err.status === 401) {\r\n          console.log('401 - пользователь с email не найден');\r\n        }\r\n        setInfoToolTipPopupOpen(true);\r\n        setIsSuccess(false);\r\n      });\r\n  }\r\n\r\n  const handleSignOut = () => {\r\n    localStorage.removeItem('userId');\r\n    setIsLoggedIn(false);\r\n    setEmail(null);\r\n    setCards([]);\r\n    navigate('/', { replace: true });\r\n  };\r\n\r\n\r\n  // [navigate]);\r\n  function renderLoading() {\r\n    setIsRenderLoadingOn((renderLoadingOn) => !renderLoadingOn);\r\n  }\r\n\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n    setIsImagePopupOpen(true)\r\n  }\r\n\r\n  function handleConfirmDeleteClick(card) {\r\n    setSelectedCard(card);\r\n    setIsConfirmDeletePopupOpen(true)\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    api.changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n      })\r\n      .catch((err) => { console.log(err) })\r\n  }\r\n\r\n  function handleCardDelete() {\r\n    api.deleteCard(selectedCard._id)\r\n      .then(() => {\r\n        setCards((cards) => cards.filter((item) => item._id !== selectedCard._id))\r\n        closeAllPopups()\r\n      })\r\n      .catch((err) => { console.log(err) })\r\n      .finally(() => renderLoading())\r\n  }\r\n\r\n  function handleAddCard(card) {\r\n    api.addNewCard(card)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => { console.log(err) })\r\n      .finally(() => renderLoading())\r\n  }\r\n\r\n\r\n\r\n  function handleChangeProfile(userData) {\r\n    api\r\n      .changeProfileData(userData)\r\n      .then((serverUserData) => {\r\n        setCurrentUser(serverUserData);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => renderLoading())\r\n  }\r\n\r\n  function handleChangeAvatar(userAvatar) {\r\n    api.changeUserAvatar(userAvatar).then((serverUserAvatar) => {\r\n      setCurrentUser(serverUserAvatar);\r\n      closeAllPopups();\r\n    }).catch((err) => { console.log(err) })\r\n      .finally(() => renderLoading())\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard(null);\r\n    setIsConfirmDeletePopupOpen(false);\r\n    setInfoToolTipPopupOpen(false);\r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem('userId');\r\n    if (userId) {\r\n      auth.checkToken(userId)\r\n        .then((res) => {\r\n          setIsLoggedIn(true);\r\n          setEmail(res.email);\r\n          navigate('/');\r\n        })\r\n        .catch((err) => {\r\n          console.log('Неправильные данные');\r\n        }\r\n        )\r\n    }\r\n  },\r\n    []);\r\n\r\n  // Получение данных текущего пользователя и начальных карточек\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      api.getMyInfo()\r\n        .then((data) => {\r\n          setCurrentUser(data)\r\n        })\r\n        .catch((err) => console.log(err))\r\n    }\r\n  },\r\n    // [isLoggedIn]);\r\n    [isLoggedIn, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      api.getServerCards()\r\n        .then((cards) => {\r\n          setCards(cards);\r\n        })\r\n        .catch((err) => console.log(err))\r\n    }\r\n  },\r\n    // [isLoggedIn])\r\n    [isLoggedIn, navigate]);\r\n\r\n\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header\r\n          email={email}\r\n          onSignOut={handleSignOut}\r\n          isLoggedIn={isLoggedIn}\r\n        />\r\n        <Routes>\r\n          <Route\r\n            path=\"/\"\r\n            element={\r\n              <ProtectedRoute\r\n                onEditAvatar={handleEditAvatarClick}\r\n                onEditProfile={handleEditProfileClick}\r\n                onAddPlace={handleAddPlaceClick}\r\n                onCardClick={handleCardClick}\r\n                onCardLike={handleCardLike}\r\n                onCardDelete={handleConfirmDeleteClick}\r\n                cards={cards}\r\n                loggedIn={isLoggedIn}\r\n              >\r\n                <Main />\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n          <Route path=\"/sign-in\" element={<Login onLogin={handleLoginSubmit} />} />\r\n          <Route path=\"/sign-up\" element={<Register onRegister={handleRegisterSubmit} />} />\r\n\r\n        </Routes>\r\n        {isLoggedIn && <Footer />}\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateProfile={handleChangeProfile}\r\n          renderLoadingOn={renderLoadingOn}\r\n          renderLoading={renderLoading}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddCard}\r\n          renderLoadingOn={renderLoadingOn}\r\n          renderLoading={renderLoading}\r\n        />\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          isOpen={isImagePopupOpen}\r\n          onClose={closeAllPopups}\r\n        />\r\n        <ConfirmDeletePopup\r\n          isOpen={isConfirmDeletePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onDeleteCard={handleCardDelete}\r\n          renderLoadingOn={renderLoadingOn}\r\n          renderLoading={renderLoading}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onChangeAvatar={handleChangeAvatar}\r\n          renderLoadingOn={renderLoadingOn}\r\n          renderLoading={renderLoading}\r\n        />\r\n        <InfoToolTip\r\n          isOpen={isInfoToolTipPopupOpen}\r\n          onClose={closeAllPopups}\r\n          isSuccess={isSuccess}\r\n        />\r\n      </div>\r\n    </CurrentUserContext.Provider >\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Main.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\ImagePopup.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\EditAvatarPopup.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Footer.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Header.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\EditProfilePopup.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\AddPlacePopup.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\InfoTooltip.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\ProtectedRoute.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Login.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Register.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\utils\\api.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\utils\\auth.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\contexts\\CurrentUserContext.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\Card.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\PopupWithForm.js",[],[],"C:\\Users\\User\\react-mesto-api-full-gha\\frontend\\src\\components\\ConfirmDeletePopup.js",[],[],{"ruleId":"104","severity":1,"message":"105","line":199,"column":5,"nodeType":"106","endLine":199,"endColumn":7,"suggestions":"107"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'navigate'. Either include it or remove the dependency array.","ArrayExpression",["108"],{"desc":"109","fix":"110"},"Update the dependencies array to be: [navigate]",{"range":"111","text":"112"},[5657,5659],"[navigate]"]